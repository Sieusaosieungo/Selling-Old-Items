{"version":3,"sources":["utils/formatPrice.js","components/CustomerInfo/index.js","pages/MyPosts/index.js"],"names":["numberToNumberWithCommas","x","toString","replace","prefixcls","CustomerInfo","email","full_name","gender","student_id","phone","address","className","connect","global","dispatch","withCookies","cookies","useState","myPosts","setMyPosts","customer","setCustomer","accessToken","columns","title","dataIndex","key","render","text","record","to","_id","cost","mainImage","src","config","API_IMAGES","style","width","height","onClick","showCustomerInfo","buyer","user_id","boughtName","visible","isShowModalCustomerInfo","onOk","updateState","onCancel","display","flexDirection","backgroundColor","color","marginBottom","handleApprove","type","handleCancel","handleEdit","handleDelete","customerId","axios","method","url","API_URL","headers","authorization","then","res","data","results","user","catch","err","console","log","productId","product_id","status","products","message","success","useEffect","rowKey","bordered","dataSource","size"],"mappings":"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","file":"static/js/9.ff549843.chunk.js","sourcesContent":["export const numberToNumberWithCommas = x => {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\nexport const numberWithNonCommasToNumber = x => {\n  return x.split(',').join('');\n};\n","import React from 'react';\n\nimport './style.scss';\n\nconst prefixcls = 'customer-info';\n\nconst CustomerInfo = ({\n  email,\n  full_name,\n  gender,\n  student_id,\n  phone,\n  address,\n}) => {\n  return (\n    <div className={`${prefixcls}`}>\n      <div className={`${prefixcls}-raw`}>\n        <label>Họ tên:</label>\n        <span>{full_name}</span>\n      </div>\n      <div className={`${prefixcls}-raw`}>\n        <label>Email:</label>\n        <span>{email}</span>\n      </div>\n      <div className={`${prefixcls}-raw`}>\n        <label>Giới tính:</label>\n        <span>{gender}</span>\n      </div>\n      <div className={`${prefixcls}-raw`}>\n        <label>Sđt:</label>\n        <span>{phone}</span>\n      </div>\n      <div className={`${prefixcls}-raw`}>\n        <label>Mssv:</label>\n        <span>{student_id}</span>\n      </div>\n      <div className={`${prefixcls}-raw`}>\n        <label>Địa chỉ:</label>\n        <span>{address}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default CustomerInfo;\n","import React, { useState, useEffect } from 'react';\nimport { Table, Divider, Button, message, Modal } from 'antd';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { withCookies } from 'react-cookie';\nimport { updateState } from '../../actions';\nimport { connect } from 'react-redux';\n\nimport './style.scss';\n\nimport config from '../../utils/config';\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\nimport CustomerInfo from '../../components/CustomerInfo';\n\nconst prefixCls = 'my-posts';\n\nconst MyPosts = ({ cookies, dispatch, global }) => {\n  const [myPosts, setMyPosts] = useState([]);\n  const [customer, setCustomer] = useState({});\n\n  const { accessToken } = cookies.cookies;\n\n  const columns = [\n    {\n      title: 'Tên sản phẩm',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Link to={`/product-detail/${record._id}`}>{text}</Link>\n      ),\n    },\n    {\n      title: 'Giá',\n      dataIndex: 'cost',\n      key: 'cost',\n      render: cost => <span>{`${numberToNumberWithCommas(cost)}đ`}</span>,\n    },\n    {\n      title: 'Ảnh',\n      dataIndex: 'mainImage',\n      key: 'mainImage',\n      render: mainImage => (\n        <img\n          src={`${config.API_IMAGES}${mainImage}`}\n          style={{ width: '10rem', height: '10rem' }}\n        />\n      ),\n    },\n    {\n      title: 'Mô tả',\n      dataIndex: 'description',\n      key: 'description',\n    },\n    {\n      title: 'Người mua',\n      dataIndex: 'buyer',\n      key: 'buyer',\n      render: (text, record) => (\n        <Link to=\"#\" onClick={() => showCustomerInfo(record.buyer.user_id)}>\n          {(record.buyer && record.buyer.boughtName) || ''}\n          <Modal\n            title=\"Thông tin người mua sản phẩm\"\n            visible={global.isShowModalCustomerInfo}\n            onOk={() =>\n              dispatch(updateState({ isShowModalCustomerInfo: false }))\n            }\n            onCancel={() =>\n              dispatch(updateState({ isShowModalCustomerInfo: false }))\n            }\n          >\n            <CustomerInfo {...customer} />\n          </Modal>\n        </Link>\n      ),\n    },\n    {\n      title: 'Trạng thái',\n      dataIndex: 'status',\n      key: 'status',\n    },\n    {\n      title: 'Thao tác trạng thái',\n      dataIndex: '',\n      key: 'actstatus',\n      render: (text, record) => (\n        <span style={{ display: 'flex', flexDirection: 'column' }}>\n          <Button\n            style={{\n              backgroundColor: '#28A745',\n              color: '#fff',\n              marginBottom: '.5rem',\n            }}\n            onClick={() => handleApprove(record._id)}\n          >\n            Xác nhận\n          </Button>\n          <Button type=\"danger\" onClick={() => handleCancel(record._id)}>\n            Hủy bỏ\n          </Button>\n        </span>\n      ),\n    },\n    {\n      title: 'Thao tác sản phẩm',\n      dataIndex: '',\n      key: 'actproduct',\n      render: (text, record) => (\n        <span style={{ display: 'flex', flexDirection: 'column' }}>\n          <Button\n            type=\"primary\"\n            onClick={() => handleEdit(record._id)}\n            style={{\n              color: '#fff',\n              marginBottom: '.5rem',\n            }}\n          >\n            Cập nhật\n          </Button>\n          <Button\n            type=\"danger\"\n            onClick={() => handleDelete(record._id)}\n            style={{\n              color: '#fff',\n              marginBottom: '.5rem',\n            }}\n          >\n            Xóa\n          </Button>\n        </span>\n      ),\n    },\n  ];\n\n  const showCustomerInfo = customerId => {\n    axios({\n      method: 'GET',\n      url: `${config.API_URL}/users/${customerId}`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n    })\n      .then(res => {\n        dispatch(updateState({ isShowModalCustomerInfo: true }));\n        setCustomer(res.data.results.user);\n      })\n      .catch(err => console.log(err));\n  };\n\n  const handleApprove = productId => {\n    axios({\n      method: 'PATCH',\n      url: `${config.API_URL}/products/approved`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n      data: {\n        product_id: productId,\n      },\n    })\n      .then(res => {\n        if (res.data.status === 1) {\n          setMyPosts(res.data.results.products);\n          message.success('Xác nhận bán thành công !');\n        }\n      })\n      .catch(err => console.log(err));\n  };\n\n  const handleCancel = productId => {};\n\n  const handleEdit = productId => {\n    console.log('Editing: ', productId);\n  };\n\n  const handleDelete = productId => {\n    console.log('Deleted: ', productId);\n  };\n\n  useEffect(() => {\n    axios({\n      method: 'GET',\n      url: `${config.API_URL}/users/my-products`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n    })\n      .then(res => {\n        if (res.data.results) {\n          setMyPosts(res.data.results.products);\n          // console.log('my posts: ', res.data.results.products);\n        }\n      })\n      .catch(err => console.log(err));\n  }, []);\n\n  console.log(myPosts);\n\n  return (\n    <div className={`${prefixCls}`}>\n      <Table\n        rowKey={record => record._id}\n        bordered\n        dataSource={myPosts}\n        columns={columns}\n        size=\"small\"\n      />\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ global }) => {\n  return { global };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return { dispatch };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withCookies(MyPosts));\n"],"sourceRoot":""}