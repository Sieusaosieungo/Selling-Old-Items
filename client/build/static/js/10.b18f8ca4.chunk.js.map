{"version":3,"sources":["utils/formatPrice.js","components/CustomerInfo/index.js","pages/MyPosts/index.js"],"names":["numberToNumberWithCommas","x","toString","replace","prefixcls","CustomerInfo","email","full_name","gender","student_id","phone","address","avatar","className","style","textAlign","marginBottom","src","config","API_IMAGES","width","height","borderRadius","overflow","connect","global","dispatch","withCookies","cookies","useState","myPosts","setMyPosts","customer","setCustomer","accessToken","columns","title","dataIndex","key","render","text","record","to","_id","cost","mainImage","onClick","showCustomerInfo","buyer","user_id","boughtName","visible","isShowModalCustomerInfo","onOk","updateState","onCancel","display","flexDirection","backgroundColor","color","handleApprove","type","handleCancel","handleEdit","handleDelete","customerId","axios","method","url","API_URL","headers","authorization","then","res","data","results","user","catch","err","console","log","productId","product_id","status","products","message","success","useEffect","rowKey","bordered","dataSource","size"],"mappings":"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","file":"static/js/10.b18f8ca4.chunk.js","sourcesContent":["export const numberToNumberWithCommas = x => {\r\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\nexport const numberWithNonCommasToNumber = x => {\r\n  return x.split(',').join('');\r\n};\r\n","import React from 'react';\r\n\r\nimport './style.scss';\r\nimport config from '../../utils/config';\r\n\r\nconst prefixcls = 'customer-info';\r\n\r\nconst CustomerInfo = ({\r\n  email,\r\n  full_name,\r\n  gender,\r\n  student_id,\r\n  phone,\r\n  address,\r\n  avatar,\r\n}) => {\r\n  return (\r\n    <div className={`${prefixcls}`}>\r\n      <div\r\n        style={{\r\n          textAlign: 'center',\r\n          marginBottom: '1rem',\r\n        }}\r\n      >\r\n        <img\r\n          src={`${config.API_IMAGES}${avatar}`}\r\n          style={{\r\n            width: '20rem',\r\n            height: '20rem',\r\n            borderRadius: '50%',\r\n            overflow: 'hidden',\r\n          }}\r\n        />\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Họ tên:</label>\r\n        <span>{full_name}</span>\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Email:</label>\r\n        <span>{email}</span>\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Giới tính:</label>\r\n        <span>{gender}</span>\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Sđt:</label>\r\n        <span>{phone}</span>\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Mssv:</label>\r\n        <span>{student_id}</span>\r\n      </div>\r\n      <div className={`${prefixcls}-raw`}>\r\n        <label>Địa chỉ:</label>\r\n        <span>{address}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerInfo;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Table, Divider, Button, message, Modal } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { withCookies } from 'react-cookie';\r\nimport { updateState } from '../../actions';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './style.scss';\r\n\r\nimport config from '../../utils/config';\r\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\r\nimport CustomerInfo from '../../components/CustomerInfo';\r\n\r\nconst prefixCls = 'my-posts';\r\n\r\nconst MyPosts = ({ cookies, dispatch, global }) => {\r\n  const [myPosts, setMyPosts] = useState([]);\r\n  const [customer, setCustomer] = useState({});\r\n\r\n  const { accessToken } = cookies.cookies;\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Tên sản phẩm',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Link to={`/product-detail/${record._id}`}>{text}</Link>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Giá',\r\n      dataIndex: 'cost',\r\n      key: 'cost',\r\n      render: cost => <span>{`${numberToNumberWithCommas(cost)}đ`}</span>,\r\n    },\r\n    {\r\n      title: 'Ảnh',\r\n      dataIndex: 'mainImage',\r\n      key: 'mainImage',\r\n      render: mainImage => (\r\n        <img\r\n          src={`${config.API_IMAGES}${mainImage}`}\r\n          style={{ width: '10rem', height: '10rem' }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Mô tả',\r\n      dataIndex: 'description',\r\n      key: 'description',\r\n    },\r\n    {\r\n      title: 'Người mua',\r\n      dataIndex: 'buyer',\r\n      key: 'buyer',\r\n      render: (text, record) => (\r\n        <>\r\n          <Link to=\"#\" onClick={() => showCustomerInfo(record.buyer.user_id)}>\r\n            {(record.buyer && record.buyer.boughtName) || ''}\r\n          </Link>\r\n          <Modal\r\n            title=\"Thông tin người mua sản phẩm\"\r\n            visible={global.isShowModalCustomerInfo}\r\n            onOk={() =>\r\n              dispatch(updateState({ isShowModalCustomerInfo: false }))\r\n            }\r\n            onCancel={() =>\r\n              dispatch(updateState({ isShowModalCustomerInfo: false }))\r\n            }\r\n          >\r\n            <CustomerInfo {...customer} />\r\n          </Modal>\r\n        </>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n    },\r\n    {\r\n      title: 'Thao tác trạng thái',\r\n      dataIndex: '',\r\n      key: 'actstatus',\r\n      render: (text, record) => (\r\n        <span style={{ display: 'flex', flexDirection: 'column' }}>\r\n          <Button\r\n            style={{\r\n              backgroundColor: '#28A745',\r\n              color: '#fff',\r\n              marginBottom: '.5rem',\r\n            }}\r\n            onClick={() => handleApprove(record._id)}\r\n          >\r\n            Xác nhận\r\n          </Button>\r\n          <Button type=\"danger\" onClick={() => handleCancel(record._id)}>\r\n            Hủy bỏ\r\n          </Button>\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Thao tác sản phẩm',\r\n      dataIndex: '',\r\n      key: 'actproduct',\r\n      render: (text, record) => (\r\n        <span style={{ display: 'flex', flexDirection: 'column' }}>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => handleEdit(record._id)}\r\n            style={{\r\n              color: '#fff',\r\n              marginBottom: '.5rem',\r\n            }}\r\n          >\r\n            Cập nhật\r\n          </Button>\r\n          <Button\r\n            type=\"danger\"\r\n            onClick={() => handleDelete(record._id)}\r\n            style={{\r\n              color: '#fff',\r\n              marginBottom: '.5rem',\r\n            }}\r\n          >\r\n            Xóa\r\n          </Button>\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const showCustomerInfo = customerId => {\r\n    axios({\r\n      method: 'GET',\r\n      url: `${config.API_URL}/users/${customerId}`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n    })\r\n      .then(res => {\r\n        dispatch(updateState({ isShowModalCustomerInfo: true }));\r\n        setCustomer(res.data.results.user);\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  const handleApprove = productId => {\r\n    axios({\r\n      method: 'PATCH',\r\n      url: `${config.API_URL}/products/approved`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n      data: {\r\n        product_id: productId,\r\n      },\r\n    })\r\n      .then(res => {\r\n        if (res.data.status === 1) {\r\n          setMyPosts(res.data.results.products);\r\n          message.success('Xác nhận bán thành công !');\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  const handleCancel = productId => {};\r\n\r\n  const handleEdit = productId => {\r\n    console.log('Editing: ', productId);\r\n  };\r\n\r\n  const handleDelete = productId => {\r\n    console.log('Deleted: ', productId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios({\r\n      method: 'GET',\r\n      url: `${config.API_URL}/users/my-products`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n    })\r\n      .then(res => {\r\n        if (res.data.results) {\r\n          setMyPosts(res.data.results.products);\r\n          // console.log('my posts: ', res.data.results.products);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, []);\r\n\r\n  // console.log(myPosts);\r\n\r\n  return (\r\n    <div className={`${prefixCls}`}>\r\n      <Table\r\n        rowKey={record => record._id}\r\n        bordered\r\n        dataSource={myPosts}\r\n        columns={columns}\r\n        size=\"small\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ global }) => {\r\n  return { global };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return { dispatch };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(withCookies(MyPosts));\r\n"],"sourceRoot":""}