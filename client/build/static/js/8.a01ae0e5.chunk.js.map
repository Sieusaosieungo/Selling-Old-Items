{"version":3,"sources":["utils/formatPrice.js","components/CartItem/index.js","pages/Cart/index.js"],"names":["numberToNumberWithCommas","x","toString","replace","withCookies","product_id","productPrice","productImages","productName","cookies","quantity","setCart","accessToken","className","src","config","API_IMAGES","to","type","onClick","axios","method","url","API_URL","headers","authorization","data","then","res","results","message","success","catch","err","error","Cart","useCookies","useState","cart","useEffect","listItems","console","log","JSON","stringify","length","result","map","productItem","index","key","renderCartItem","total_money","handleTempPayment","handleRealPayment","style","marginTop","width"],"mappings":"4GAAA,kCAAO,IAAMA,EAA2B,SAAAC,GACtC,OAAOA,EAAEC,WAAWC,QAAQ,wBAAyB,O,8MC4DxCC,eAhDE,SAAC,GAQX,IAPLC,EAOI,EAPJA,WACAC,EAMI,EANJA,aACAC,EAKI,EALJA,cACAC,EAII,EAJJA,YAEAC,GAEI,EAHJC,SAGI,EAFJD,SACAE,EACI,EADJA,QAEQC,EAAgBH,EAAQA,QAAxBG,YAuBR,OACE,yBAAKC,UAAS,UAnCA,cAoCZ,yBAAKC,IAAG,UAAKC,IAAOC,YAAZ,OAAyBT,EAAc,MAC/C,yBAAKM,UAAS,UArCF,YAqCE,UACZ,kBAAC,IAAD,CAAMI,GAAE,0BAAqBZ,IAAeG,GAC5C,wCAAUR,YAAyBM,GAAnC,WACA,yBAAKO,UAAS,UAxCJ,YAwCI,SACZ,kBAAC,IAAD,CAAQK,KAAK,SAASC,QA5BT,WACnBC,IAAM,CACJC,OAAQ,SACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,yBACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,IAE3Bc,KAAM,CACJrB,gBAGDsB,MAAK,SAAAC,GACAA,EAAIF,KAAKG,UACXlB,EAAQiB,EAAIF,KAAKG,SACjBC,IAAQC,QAAQ,oDAInBC,OAAM,SAAAC,GAAG,OAAIH,IAAQI,MAAM,2CAUxB,gB,MC6DKC,UAvFF,SAAC,GAAQ,qBACuBC,YAAW,WADnC,mBACZ3B,EADY,kBAEK4B,mBAAS,KAFd,mBAEZC,EAFY,KAEN3B,EAFM,KAIXC,EAAgBH,EAAhBG,YAyCR,OAjBA2B,qBAAU,WACRnB,IAAM,CACJC,OAAQ,MACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,WACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,MAG1Be,MAAK,SAAAC,GACAA,EAAIF,KAAKG,QAAQW,WACnB7B,EAAQiB,EAAIF,KAAKG,YAIpBG,OAAM,SAAAC,GAAG,OAAIQ,QAAQC,IAAIT,QAC3B,CAACU,KAAKC,UAAUN,KAGjB,yBAAKzB,UAAS,UA5DA,SA6DZ,8CAEE,kCAAQyB,EAAKE,UAAYF,EAAKE,UAAUK,OAAS,EAAjD,yBAEF,yBAAKhC,UAAS,UAjEF,OAiEE,aACXyB,EAAKE,WAhES,SAACA,EAAW7B,GACjC,IAAImC,EAAS,KAQb,OANIN,GAAaA,EAAUK,OAAS,IAClCC,EAASN,EAAUO,KAAI,SAACC,EAAaC,GACnC,OAAO,kBAAC,EAAD,eAAUC,IAAKD,GAAWD,EAA1B,CAAuCrC,QAASA,SAIpDmC,EAuDkBK,CAAeb,EAAKE,UAAW7B,IAChD2B,EAAKE,WACL,yBAAK3B,UAAS,UApEN,OAoEM,WAAd,iCAGJ,yBAAKA,UAAS,UAvEF,OAuEE,kBACZ,yBAAKA,UAAS,UAxEJ,OAwEI,aACZ,yBAAKA,UAAS,UAzEN,OAyEM,UACZ,mDACA,wCAAUb,YAvDM,SAAAsC,GACxB,OAAOA,EAAKc,YAuDFC,CAAkBf,IAAS,GAD7B,YAIF,+BACA,yBAAKzB,UAAS,UAhFN,OAgFM,UACZ,yFACA,wCAAUb,YA1DM,SAAAsC,GACxB,OAAOA,EAAKc,YA0DFE,CAAkBhB,IAAS,GAD7B,aAKJ,yBAAKzB,UAAS,UAvFJ,OAuFI,SACZ,kBAAC,IAAD,CACEK,KAAK,SACLqC,MAAO,CAAEC,UAAW,SAAUC,MAAO,OACrCtC,QA/DY,WACpBC,IAAM,CACJC,OAAQ,QACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,cACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,MAG1Be,MAAK,SAAAC,GACJE,IAAQC,QAAQ,wCAEjBC,OAAM,SAAAC,GAAG,OAAIQ,QAAQC,IAAIT,QAiDtB","file":"static/js/8.a01ae0e5.chunk.js","sourcesContent":["export const numberToNumberWithCommas = x => {\r\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\nexport const numberWithNonCommasToNumber = x => {\r\n  return x.split(',').join('');\r\n};\r\n","/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, message } from 'antd';\r\nimport axios from 'axios';\r\nimport { withCookies } from 'react-cookie';\r\n\r\nimport './style.scss';\r\nimport config from '../../utils/config';\r\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\r\n\r\nconst prefixCls = 'cart-item';\r\n\r\nconst CartItem = ({\r\n  product_id,\r\n  productPrice,\r\n  productImages,\r\n  productName,\r\n  quantity,\r\n  cookies,\r\n  setCart,\r\n}) => {\r\n  const { accessToken } = cookies.cookies;\r\n\r\n  const handleDelete = () => {\r\n    axios({\r\n      method: 'DELETE',\r\n      url: `${config.API_URL}/carts/delete-product`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n      data: {\r\n        product_id,\r\n      },\r\n    })\r\n      .then(res => {\r\n        if (res.data.results) {\r\n          setCart(res.data.results);\r\n          message.success('Xóa sản phẩm thành công !');\r\n          // console.log(res.data.results);\r\n        }\r\n      })\r\n      .catch(err => message.error('Xóa không thành công !'));\r\n  };\r\n\r\n  return (\r\n    <div className={`${prefixCls}`}>\r\n      <img src={`${config.API_IMAGES}${productImages[0]}`} />\r\n      <div className={`${prefixCls}-info`}>\r\n        <Link to={`/product-detail/${product_id}`}>{productName}</Link>\r\n        <span>{`${numberToNumberWithCommas(productPrice)}đ`}</span>\r\n        <div className={`${prefixCls}-btn`}>\r\n          <Button type=\"danger\" onClick={handleDelete}>\r\n            Xóa\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withCookies(CartItem);\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Button, message } from 'antd';\r\n\r\nimport './style.scss';\r\n\r\nimport CartItem from '../../components/CartItem';\r\nimport config from '../../utils/config';\r\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\r\nimport Loading from '../../components/Loading';\r\n\r\nconst prefixCls = 'cart';\r\n\r\nconst renderCartItem = (listItems, setCart) => {\r\n  let result = null;\r\n\r\n  if (listItems && listItems.length > 0) {\r\n    result = listItems.map((productItem, index) => {\r\n      return <CartItem key={index} {...productItem} setCart={setCart} />;\r\n    });\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst Cart = ({}) => {\r\n  const [cookies, setCookie, removeCookie] = useCookies('cookies');\r\n  const [cart, setCart] = useState([]);\r\n\r\n  const { accessToken } = cookies;\r\n\r\n  const handleTempPayment = cart => {\r\n    return cart.total_money;\r\n  };\r\n\r\n  const handleRealPayment = cart => {\r\n    return cart.total_money;\r\n  };\r\n\r\n  const handlePayment = () => {\r\n    axios({\r\n      method: 'PATCH',\r\n      url: `${config.API_URL}/carts/pay`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n    })\r\n      .then(res => {\r\n        message.success('Giao dịch thành công !');\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios({\r\n      method: 'GET',\r\n      url: `${config.API_URL}/carts/`,\r\n      headers: {\r\n        authorization: `Bearer ${accessToken}`,\r\n      },\r\n    })\r\n      .then(res => {\r\n        if (res.data.results.listItems) {\r\n          setCart(res.data.results);\r\n          // console.log('cart=', res.data.results);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, [JSON.stringify(cart)]);\r\n\r\n  return (\r\n    <div className={`${prefixCls}`}>\r\n      <p>\r\n        giỏ hàng\r\n        <span>({cart.listItems ? cart.listItems.length : 0} sản phẩm)</span>\r\n      </p>\r\n      <div className={`${prefixCls}-content`}>\r\n        {cart.listItems && renderCartItem(cart.listItems, setCart)}\r\n        {!cart.listItems && (\r\n          <div className={`${prefixCls}-empty`}>Giỏ hàng rỗng !</div>\r\n        )}\r\n      </div>\r\n      <div className={`${prefixCls}-payment-side`}>\r\n        <div className={`${prefixCls}-payment`}>\r\n          <div className={`${prefixCls}-temp`}>\r\n            <span>Tạm tính:</span>\r\n            <span>{`${numberToNumberWithCommas(\r\n              handleTempPayment(cart) || 0,\r\n            )}đ`}</span>\r\n          </div>\r\n          <span></span>\r\n          <div className={`${prefixCls}-real`}>\r\n            <span>Thành tiền (Đã có giảm giá):</span>\r\n            <span>{`${numberToNumberWithCommas(\r\n              handleRealPayment(cart) || 0,\r\n            )}đ`}</span>\r\n          </div>\r\n        </div>\r\n        <div className={`${prefixCls}-btn`}>\r\n          <Button\r\n            type=\"danger\"\r\n            style={{ marginTop: '1.5rem', width: '80%' }}\r\n            onClick={handlePayment}\r\n          >\r\n            Thanh toán\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"sourceRoot":""}