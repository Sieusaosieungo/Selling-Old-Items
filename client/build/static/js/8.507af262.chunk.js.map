{"version":3,"sources":["utils/formatPrice.js","components/CartItem/index.js","pages/Cart/index.js"],"names":["numberToNumberWithCommas","x","toString","replace","withCookies","product_id","productPrice","productImages","productName","cookies","quantity","setCart","accessToken","className","src","config","API_IMAGES","to","type","onClick","axios","method","url","API_URL","headers","authorization","data","then","res","results","message","success","catch","err","error","Cart","useCookies","useState","cart","useEffect","listItems","console","log","JSON","stringify","length","result","map","productItem","index","key","renderCartItem","total_money","handleTempPayment","handleRealPayment","style","marginTop","width"],"mappings":"4GAAA,kCAAO,IAAMA,EAA2B,SAAAC,GACtC,OAAOA,EAAEC,WAAWC,QAAQ,wBAAyB,O,8MC4DxCC,eAhDE,SAAC,GAQX,IAPLC,EAOI,EAPJA,WACAC,EAMI,EANJA,aACAC,EAKI,EALJA,cACAC,EAII,EAJJA,YAEAC,GAEI,EAHJC,SAGI,EAFJD,SACAE,EACI,EADJA,QAEQC,EAAgBH,EAAQA,QAAxBG,YAuBR,OACE,yBAAKC,UAAS,UAnCA,cAoCZ,yBAAKC,IAAG,UAAKC,IAAOC,YAAZ,OAAyBT,EAAc,MAC/C,yBAAKM,UAAS,UArCF,YAqCE,UACZ,kBAAC,IAAD,CAAMI,GAAE,0BAAqBZ,IAAeG,GAC5C,wCAAUR,YAAyBM,GAAnC,WACA,yBAAKO,UAAS,UAxCJ,YAwCI,SACZ,kBAAC,IAAD,CAAQK,KAAK,SAASC,QA5BT,WACnBC,IAAM,CACJC,OAAQ,SACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,yBACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,IAE3Bc,KAAM,CACJrB,gBAGDsB,MAAK,SAAAC,GACAA,EAAIF,KAAKG,UACXlB,EAAQiB,EAAIF,KAAKG,SACjBC,IAAQC,QAAQ,oDAInBC,OAAM,SAAAC,GAAG,OAAIH,IAAQI,MAAM,2CAUxB,gB,MC6DKC,UAvFF,SAAC,GAAQ,qBACuBC,YAAW,WADnC,mBACZ3B,EADY,kBAEK4B,mBAAS,KAFd,mBAEZC,EAFY,KAEN3B,EAFM,KAIXC,EAAgBH,EAAhBG,YAyCR,OAjBA2B,qBAAU,WACRnB,IAAM,CACJC,OAAQ,MACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,WACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,MAG1Be,MAAK,SAAAC,GACAA,EAAIF,KAAKG,QAAQW,WACnB7B,EAAQiB,EAAIF,KAAKG,YAIpBG,OAAM,SAAAC,GAAG,OAAIQ,QAAQC,IAAIT,QAC3B,CAACU,KAAKC,UAAUN,KAGjB,yBAAKzB,UAAS,UA5DA,SA6DZ,8CAEE,kCAAQyB,EAAKE,UAAYF,EAAKE,UAAUK,OAAS,EAAjD,yBAEF,yBAAKhC,UAAS,UAjEF,OAiEE,aACXyB,EAAKE,WAhES,SAACA,EAAW7B,GACjC,IAAImC,EAAS,KAQb,OANIN,GAAaA,EAAUK,OAAS,IAClCC,EAASN,EAAUO,KAAI,SAACC,EAAaC,GACnC,OAAO,kBAAC,EAAD,eAAUC,IAAKD,GAAWD,EAA1B,CAAuCrC,QAASA,SAIpDmC,EAuDkBK,CAAeb,EAAKE,UAAW7B,IAChD2B,EAAKE,WACL,yBAAK3B,UAAS,UApEN,OAoEM,WAAd,iCAGJ,yBAAKA,UAAS,UAvEF,OAuEE,kBACZ,yBAAKA,UAAS,UAxEJ,OAwEI,aACZ,yBAAKA,UAAS,UAzEN,OAyEM,UACZ,mDACA,wCAAUb,YAvDM,SAAAsC,GACxB,OAAOA,EAAKc,YAuDFC,CAAkBf,IAAS,GAD7B,YAIF,+BACA,yBAAKzB,UAAS,UAhFN,OAgFM,UACZ,yFACA,wCAAUb,YA1DM,SAAAsC,GACxB,OAAOA,EAAKc,YA0DFE,CAAkBhB,IAAS,GAD7B,aAKJ,yBAAKzB,UAAS,UAvFJ,OAuFI,SACZ,kBAAC,IAAD,CACEK,KAAK,SACLqC,MAAO,CAAEC,UAAW,SAAUC,MAAO,OACrCtC,QA/DY,WACpBC,IAAM,CACJC,OAAQ,QACRC,IAAI,GAAD,OAAKP,IAAOQ,QAAZ,cACHC,QAAS,CACPC,cAAc,UAAD,OAAYb,MAG1Be,MAAK,SAAAC,GACJE,IAAQC,QAAQ,wCAEjBC,OAAM,SAAAC,GAAG,OAAIQ,QAAQC,IAAIT,QAiDtB","file":"static/js/8.507af262.chunk.js","sourcesContent":["export const numberToNumberWithCommas = x => {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\nexport const numberWithNonCommasToNumber = x => {\n  return x.split(',').join('');\n};\n","/* eslint-disable jsx-a11y/alt-text */\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button, message } from 'antd';\nimport axios from 'axios';\nimport { withCookies } from 'react-cookie';\n\nimport './style.scss';\nimport config from '../../utils/config';\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\n\nconst prefixCls = 'cart-item';\n\nconst CartItem = ({\n  product_id,\n  productPrice,\n  productImages,\n  productName,\n  quantity,\n  cookies,\n  setCart,\n}) => {\n  const { accessToken } = cookies.cookies;\n\n  const handleDelete = () => {\n    axios({\n      method: 'DELETE',\n      url: `${config.API_URL}/carts/delete-product`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n      data: {\n        product_id,\n      },\n    })\n      .then(res => {\n        if (res.data.results) {\n          setCart(res.data.results);\n          message.success('Xóa sản phẩm thành công !');\n          // console.log(res.data.results);\n        }\n      })\n      .catch(err => message.error('Xóa không thành công !'));\n  };\n\n  return (\n    <div className={`${prefixCls}`}>\n      <img src={`${config.API_IMAGES}${productImages[0]}`} />\n      <div className={`${prefixCls}-info`}>\n        <Link to={`/product-detail/${product_id}`}>{productName}</Link>\n        <span>{`${numberToNumberWithCommas(productPrice)}đ`}</span>\n        <div className={`${prefixCls}-btn`}>\n          <Button type=\"danger\" onClick={handleDelete}>\n            Xóa\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withCookies(CartItem);\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { Button, message } from 'antd';\n\nimport './style.scss';\n\nimport CartItem from '../../components/CartItem';\nimport config from '../../utils/config';\nimport { numberToNumberWithCommas } from '../../utils/formatPrice';\nimport Loading from '../../components/Loading';\n\nconst prefixCls = 'cart';\n\nconst renderCartItem = (listItems, setCart) => {\n  let result = null;\n\n  if (listItems && listItems.length > 0) {\n    result = listItems.map((productItem, index) => {\n      return <CartItem key={index} {...productItem} setCart={setCart} />;\n    });\n  }\n\n  return result;\n};\n\nconst Cart = ({}) => {\n  const [cookies, setCookie, removeCookie] = useCookies('cookies');\n  const [cart, setCart] = useState([]);\n\n  const { accessToken } = cookies;\n\n  const handleTempPayment = cart => {\n    return cart.total_money;\n  };\n\n  const handleRealPayment = cart => {\n    return cart.total_money;\n  };\n\n  const handlePayment = () => {\n    axios({\n      method: 'PATCH',\n      url: `${config.API_URL}/carts/pay`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n    })\n      .then(res => {\n        message.success('Giao dịch thành công !');\n      })\n      .catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    axios({\n      method: 'GET',\n      url: `${config.API_URL}/carts/`,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n    })\n      .then(res => {\n        if (res.data.results.listItems) {\n          setCart(res.data.results);\n          // console.log('cart=', res.data.results);\n        }\n      })\n      .catch(err => console.log(err));\n  }, [JSON.stringify(cart)]);\n\n  return (\n    <div className={`${prefixCls}`}>\n      <p>\n        giỏ hàng\n        <span>({cart.listItems ? cart.listItems.length : 0} sản phẩm)</span>\n      </p>\n      <div className={`${prefixCls}-content`}>\n        {cart.listItems && renderCartItem(cart.listItems, setCart)}\n        {!cart.listItems && (\n          <div className={`${prefixCls}-empty`}>Giỏ hàng rỗng !</div>\n        )}\n      </div>\n      <div className={`${prefixCls}-payment-side`}>\n        <div className={`${prefixCls}-payment`}>\n          <div className={`${prefixCls}-temp`}>\n            <span>Tạm tính:</span>\n            <span>{`${numberToNumberWithCommas(\n              handleTempPayment(cart) || 0,\n            )}đ`}</span>\n          </div>\n          <span></span>\n          <div className={`${prefixCls}-real`}>\n            <span>Thành tiền (Đã có giảm giá):</span>\n            <span>{`${numberToNumberWithCommas(\n              handleRealPayment(cart) || 0,\n            )}đ`}</span>\n          </div>\n        </div>\n        <div className={`${prefixCls}-btn`}>\n          <Button\n            type=\"danger\"\n            style={{ marginTop: '1.5rem', width: '80%' }}\n            onClick={handlePayment}\n          >\n            Thanh toán\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"sourceRoot":""}