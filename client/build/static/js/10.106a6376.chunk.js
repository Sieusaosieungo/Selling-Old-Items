(window.webpackJsonpCKEditor5=window.webpackJsonpCKEditor5||[]).push([[10],{374:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},405:function(e,t,a){},463:function(e,t,a){"use strict";a.r(t);var n=a(460),c=a(63),r=a(47),o=a(0),i=a.n(o),u=a(35),l=a(399),m=a.n(l),s=a(62),d=a.n(s),p=a(37),g=a(400),h=a(369),f=a(470),E=a(464),v=a(368),b=a(31),O=a(372),y=a(469),w=a(367),j=(a(405),a(46)),P=a(84),S=a(374);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=h.a.TextArea,_="product-detail",C=function(e){var t=e.comments;return i.a.createElement(f.a,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return i.a.createElement(E.a,e)}})},N=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,c=e.value;return i.a.createElement("div",null,i.a.createElement(v.a.Item,null,i.a.createElement(I,{rows:4,onChange:t,value:c})),i.a.createElement(v.a.Item,null,i.a.createElement(b.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"B\xecnh lu\u1eadn")))};t.default=Object(p.b)((function(e){return{user:e.user}}),null)(Object(u.c)((function(e){var t=e.match.params.id,a=e.cookies,c=e.user,u=Object(o.useState)({submitting:!1,value:""}),l=Object(r.a)(u,2),s=l[0],p=l[1],h=Object(o.useState)({}),f=Object(r.a)(h,2),v=f[0],A=f[1],I=a.cookies.accessToken;return Object(o.useEffect)((function(){d()({method:"GET",url:"".concat(j.a.API_URL,"/products/").concat(t)}).then((function(e){e.data.results.product&&A(e.data.results.product)})).catch((function(e){return console.log(e)}))}),[t]),JSON.stringify({})!==JSON.stringify(v)?i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"".concat(_)},i.a.createElement("div",{className:"".concat(_,"-image")},i.a.createElement(g.Carousel,{infiniteLoop:!0,autoPlay:!0,transitionTime:!0},function(e){var t=null;return e&&e.length>0&&(t=e.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("img",{src:"".concat(j.a.API_IMAGES).concat(e),alt:"Attach image"}))}))),t}([].concat(Object(n.a)(v.attachImages),[v.mainImage])))),i.a.createElement("div",{className:"".concat(_,"-info")},i.a.createElement("div",{className:"".concat(_,"-title")},v.name),i.a.createElement("div",{className:"".concat(_,"-price")},"".concat(Object(S.a)(v.cost),"\u0111")),i.a.createElement("div",{className:"".concat(_,"-rate")},i.a.createElement(y.a,{onChange:function(e){d()({method:"PATCH",url:"".concat(j.a.API_URL,"/products/rating"),headers:{authorization:"Bearer ".concat(I)},data:{product_id:t,point:e}}).then((function(e){A(e.data.results.product)})).catch((function(e){return console.log(e)}))},allowHalf:!0,value:v.averagePoint})),i.a.createElement("div",{className:"".concat(_,"-description")},i.a.createElement("span",null,"M\xf4 t\u1ea3:"),i.a.createElement("p",null,v.description)),i.a.createElement("div",{className:"".concat(_,"-quantity")},i.a.createElement(b.a,{onClick:function(){d()({method:"POST",url:"".concat(j.a.API_URL,"/products/add-to-cart"),headers:{authorization:"Bearer ".concat(I)},data:{product_id:t}}).then((function(e){O.a.success("Th\xeam s\u1ea3n ph\u1ea9m v\xe0o gi\u1ecf h\xe0ng th\xe0nh c\xf4ng !")})).catch((function(e){I?O.a.warning("S\u1ea3n ph\u1ea9m \u0111\xe3 c\xf3 trong gi\u1ecf h\xe0ng !"):O.a.warning("C\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\xeam v\xe0o gi\u1ecf h\xe0ng !")}))},type:"primary"},"Th\xeam v\xe0o gi\u1ecf"))),i.a.createElement("div",{className:"".concat(_,"-comment")},v.comments.length>0?i.a.createElement(C,{comments:v.comments.map((function(e){return T({},e,{avatar:e.avatar||j.a.IMAGE_USER_DEFAULT,datetime:m()(new Date(e.datetime)).fromNow()})}))}):i.a.createElement("div",{style:{margin:"2rem auto 3rem",width:"80%",borderTop:"1px solid rgb(202, 202, 202)"}}),i.a.createElement(E.a,{avatar:i.a.createElement(w.a,{src:c.image||j.a.IMAGE_USER_DEFAULT,alt:c.full_name}),content:i.a.createElement(N,{onChange:function(e){p(T({},s,{value:e.target.value}))},onSubmit:function(){s.value&&(p(T({},s,{submitting:!0})),setTimeout((function(){p({submitting:!1,value:""})}),500),d()({method:"PATCH",url:"".concat(j.a.API_URL,"/products/add-comment"),headers:{authorization:"Bearer ".concat(I)},data:{product_id:t,content:s.value,datetime:new Date}}).then((function(e){A(e.data.results.product)})).catch((function(e){return console.log(e)})))},submitting:s.submitting,value:s.value})})))):i.a.createElement(P.a,null)})))}}]);
//# sourceMappingURL=10.106a6376.chunk.js.map